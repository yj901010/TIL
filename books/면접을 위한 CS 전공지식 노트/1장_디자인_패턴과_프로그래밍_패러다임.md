# 1ì¥ ë””ìì¸ íŒ¨í„´ê³¼ í”„ë¡œê·¸ë˜ë° íŒ¨ëŸ¬ë‹¤ì„

## ë””ìì¸íŒ¨í„´
í”„ë¡œê·¸ë¨ì„ ì„¤ê³„í•  ë•Œ ë°œìƒí–ˆë˜ ë¬¸ì œì ë“¤ì„ ê°ì²´ ê°„ì˜ ìƒí˜¸ ê´€ê³„ ë“±ì„ ì´ìš©í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë„ë¡ í•˜ë‚˜ì˜ 'ê·œì•½'í˜•íƒœë¡œ ë§Œë“¤ì–´ ë†“ì€ ê²ƒì„ ì˜ë¯¸í•œë‹¤.

## ì‹±ê¸€í†¤íŒ¨í„´
<img src="images/singleton.png" alt="Singleton Pattern" width="300"/><br>
í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— **ì˜¤ì§ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤**ë§Œ ê°€ì§€ëŠ” íŒ¨í„´ì´ë‹¤.<br>
ë³´í†µ **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ëª¨ë“ˆ**ì— ë§ì´ ì‚¬ìš©ëœë‹¤.<br>
**ì¥ì **: í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‹¤ë¥¸ ëª¨ë“ˆì´ ê³µìœ í•˜ì—¬ ì‚¬ìš©í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë¹„ìš©ì´ ì¤„ì–´ë“ ë‹¤.<br>
**ë‹¨ì **: ì˜ì¡´ì„±ì´ ë†’ì•„ì§„ë‹¤.<br>

### ì‹±ê¸€í†¤ íŒ¨í„´ ìˆ˜ë™ êµ¬í˜„ ë°©ì‹
- ì´ˆê¸°í™” íƒ€ì´ë° ì œì–´ë‚˜ ë³µì¡í•œ ë¡œì§ì„ ì‚¬ìš©í•´ì•¼í•  ë•Œ ê°€ëŠ¥
```java
// ì‹±ê¸€í†¤ í´ë˜ìŠ¤ ì •ì˜
class Singleton {

    // ì •ì  ë‚´ë¶€ í´ë˜ìŠ¤. Singleton ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³´ê´€í•˜ëŠ” ì—­í• ë§Œ í•¨.
    private static class SingleInstanceHolder {
        // í´ë˜ìŠ¤ ë¡œë”© ì‹œ ë‹¨ í•œ ë²ˆë§Œ ì´ˆê¸°í™”ë¨ (JVMì´ ë³´ì¥í•¨)
        private static final Singleton INSTANCE = new Singleton();
    }

    // ì™¸ë¶€ì—ì„œëŠ” ì´ ë©”ì„œë“œë¡œë§Œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì–»ì„ ìˆ˜ ìˆìŒ
    public static Singleton getInstance() {
        // getInstance()ê°€ í˜¸ì¶œë  ë•Œ, ë‚´ë¶€ í´ë˜ìŠ¤ê°€ ë¡œë”©ë˜ë©° INSTANCEê°€ ìƒì„±ë¨
        return SingleInstanceHolder.INSTANCE;
    }

    // ìƒì„±ìëŠ” ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ì—†ë„ë¡ private ì§€ì •
    private Singleton() {
        // ìƒì„±ìì— ì–´ë–¤ ì´ˆê¸°í™” ë¡œì§ì´ ìˆì–´ë„ ì™¸ë¶€ì—ì„œ newë¡œ ìƒì„± ëª»í•¨
    }
}
```

```java
// ì‹±ê¸€í†¤ í…ŒìŠ¤íŠ¸ìš© í´ë˜ìŠ¤
public class HelloWorld {
    public static void main(String[] args) {
        // Singleton ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‘ ë²ˆ í˜¸ì¶œ
        Singleton a = Singleton.getInstance();
        Singleton b = Singleton.getInstance();

        // ë‘ ì¸ìŠ¤í„´ìŠ¤ì˜ ì£¼ì†Œë¥¼ í™•ì¸ (hashCodeê°€ ê°™ìœ¼ë©´ ê°™ì€ ê°ì²´)
        System.out.println(a.hashCode());
        System.out.println(b.hashCode());

        // ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì¸ì§€ ë¹„êµ (ì‹±ê¸€í†¤ì´ë©´ í•­ìƒ trueì—¬ì•¼ í•¨)
        if (a == b) {
            System.out.println(true); // true ì¶œë ¥ë¨
        }
    }
}
```

### Enum ë°©ì‹
- ê°€ì¥ ê°„ë‹¨í•˜ê³  ì•ˆì „í•˜ê²Œ êµ¬í˜„ ê°€ëŠ¥
```java
// enumì„ ì´ìš©í•œ ì‹±ê¸€í†¤ ì •ì˜
public enum Singleton {
    // ë‹¨ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì •ì˜
    INSTANCE;

    // ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ê°€ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ì¼ë°˜ ë©”ì„œë“œ
    public void someMethod() {
        System.out.println("ë©”ì„œë“œ í˜¸ì¶œ");
    }
}
```
```java
// ì‹±ê¸€í†¤ í…ŒìŠ¤íŠ¸ìš© í´ë˜ìŠ¤
public class HelloWorld {
    public static void main(String[] args) {
        // Singleton ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‘ ë²ˆ ë°›ì•„ì˜´
        Singleton a = Singleton.INSTANCE;
        Singleton b = Singleton.INSTANCE;

        // ë‘ ì¸ìŠ¤í„´ìŠ¤ì˜ í•´ì‹œì½”ë“œë¥¼ ì¶œë ¥ (ê°™ì€ ê°ì²´ë©´ í•´ì‹œì½”ë“œë„ ê°™ìŒ)
        System.out.println(a.hashCode());
        System.out.println(b.hashCode());

        // ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì¸ì§€ ë¹„êµ (ì‹±ê¸€í†¤ì´ë¯€ë¡œ í•­ìƒ true)
        if (a == b) {
            System.out.println(true); // true ì¶œë ¥ë¨
        }

        // ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ë©”ì„œë“œ í˜¸ì¶œ
        a.someMethod(); // "ë©”ì„œë“œ í˜¸ì¶œ" ì¶œë ¥ë¨
    }
}
```

ê°ì²´ ì´ˆê¸°í™” íƒ€ì´ë°ì„ ì œì–´í•˜ê³  ì‹¶ìœ¼ë©´ ìˆ˜ë™ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ê³ , ê·¸ê²Œ ì•„ë‹ˆë©´ **Enumë°©ì‹ì´ ê°„ê²°í•˜ê³  ë¦¬í”Œë ‰ì…˜/ì§ë ¬í™” ë°©ì–´ê°€ ìë™**ìœ¼ë¡œ ë˜ì–´ ê¶Œì¥ëœë‹¤.

### mongooseì˜ ì‹±ê¸€í†¤ íŒ¨í„´
Node.jsì—ì„œ MongoDB ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•  ë•Œ ì“°ëŠ” mongooseëª¨ë“ˆì—ì„œ ë³¼ ìˆ˜ ìˆë‹¤.
mongooseì˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•  ë•Œ ì“°ëŠ” conect()ë¼ëŠ” í•¨ìˆ˜ëŠ” ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.

```javascript
import mongoose from 'mongoose';

// í™˜ê²½ ë³€ìˆ˜ì—ì„œ MongoDB ì—°ê²° URIë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
const MONGODB_URI = process.env.MONGODB_URI;

if (!MONGODB_URI) {
  throw new Error(
    'Please define the MONGODB_URI environment variable inside .env.local'
  );
}

/**
 * ì „ì—­(Global) ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
 * ê°œë°œ í™˜ê²½ì—ì„œëŠ” íŒŒì¼ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ëª¨ë“ˆì´ ì´ˆê¸°í™”ë˜ëŠ”ë°,
 * ì´ë•Œ ì—°ê²°ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ global ê°ì²´ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
 */
let cached = global.mongoose;

if (!cached) {
  cached = global.mongoose = { conn: null, promise: null };
}

async function dbConnect() {
  // 1. ì´ë¯¸ ì—°ê²°ëœ ê²½ìš°, ê¸°ì¡´ ì—°ê²°ì„ ì¦‰ì‹œ ë°˜í™˜
  if (cached.conn) {
    console.log('ğŸš€ Using cached database connection');
    return cached.conn;
  }

  // 2. ì—°ê²° ì¤‘ì¸ í”„ë¡œë¯¸ìŠ¤ê°€ ì—†ìœ¼ë©´, ìƒˆë¡œ ì—°ê²° ì‹œì‘
  if (!cached.promise) {
    const opts = {
      bufferCommands: false, // ì—°ê²°ì´ ëŠê²¼ì„ ë•Œ ëª…ë ¹ì„ ë²„í¼ë§í•˜ì§€ ì•ŠìŒ
    };

    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongooseInstance) => {
      console.log('âœ… New database connection established');
      return mongooseInstance;
    });
  }

  // 3. ì§„í–‰ ì¤‘ì¸ ì—°ê²° í”„ë¡œë¯¸ìŠ¤ë¥¼ ê¸°ë‹¤ë ¤ì„œ ì—°ê²° ê°ì²´ë¥¼ ì €ì¥í•˜ê³  ë°˜í™˜
  try {
    cached.conn = await cached.promise;
  } catch (e) {
    cached.promise = null; // ì—°ê²° ì‹¤íŒ¨ ì‹œ í”„ë¡œë¯¸ìŠ¤ ì œê±°
    throw e;
  }
  
  return cached.conn;
}

export default dbConnect;
```

### MySQLì˜ ì‹±í´í†¤ íŒ¨í„´
Node.jsì—ì„œ MySQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•  ë•Œë„ ì‹±ê¸€í†¤ íŒ¨í„´ì´ ì“°ì¸ë‹¤.
```javascript
import mysql from 'mysql2/promise';

// ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬ë  ì»¤ë„¥ì…˜ í’€ ê°ì²´
let pool;

const getPool = () => {
  // 1. poolì´ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„± (ìµœì´ˆ í•œ ë²ˆë§Œ ì‹¤í–‰)
  if (!pool) {
    console.log('âœ… Creating new MySQL connection pool...');
    pool = mysql.createPool({
      host: process.env.DB_HOST || 'localhost',
      user: process.env.DB_USER,
      password: process.env.DB_PASSWORD,
      database: process.env.DB_NAME,
      waitForConnections: true, // ì‚¬ìš© ê°€ëŠ¥í•œ ì»¤ë„¥ì…˜ì´ ì—†ì„ ë•Œ ëŒ€ê¸°
      connectionLimit: 10,      // ìµœëŒ€ ì»¤ë„¥ì…˜ ìˆ˜
      queueLimit: 0,            // ëŒ€ê¸°ì—´ í•œë„ (0ì€ ë¬´ì œí•œ)
    });
  }

  // 2. ì´ë¯¸ ìƒì„±ëœ poolì´ ìˆìœ¼ë©´ ì¦‰ì‹œ ë°˜í™˜
  return pool;
};

export default getPool;
```

### ì‹±ê¸€í†¤íŒ¨í„´ ë‹¨ì 
TDD(Test Driven Development)ë¥¼ í•  ë•Œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì£¼ë¡œ í•˜ëŠ”ë°, ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” í…ŒìŠ¤íŠ¸ê°€ ì„œë¡œ ë…ë¦½ì ì´ì–´ì•¼ í•˜ë©° ì–´ë–¤ ìˆœì„œë¡œë“  ì‹¤í–‰í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.<br>
í•˜ì§€ë§Œ ì‹±ê¸€í†¤ íŒ¨í„´ì€ ë¯¸ë¦¬ ìƒì„±ëœ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” íŒ¨í„´ì´ë¯€ë¡œ ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ **ë…ë¦½ì ì¸** ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê¸°ê°€ ì–´ë µë‹¤.

### ì˜ì¡´ì„± ì£¼ì…
ëª¨ë“ˆ ê°„ì˜ ê²°í•©ì„ ê°•í•˜ê²Œ ë§Œë“œëŠ” ë‹¨ì ì´ ìˆë‹¤.<br>
ì´ë•Œ ì˜ì¡´ì„± ì£¼ì…(DI, Dependency Injection)ì„ í†µí•´ ëª¨ë“ˆ ê°„ì˜ ê²°í•¨ì„ ì¡°ê¸ˆ ë” ëŠìŠ¨í•˜ê²Œ ë§Œë“¤ì–´ í•´ê²° í•  ìˆ˜ ìˆë‹¤.<br>

<img src="images/DI.png" alt="DI" width="300"/><br>
ë©”ì¸ ëª¨ë“ˆì´ 'ì§ì ‘' ë‹¤ë¥¸ í•˜ìœ„ ëª¨ë“ˆì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ì£¼ê¸°ë³´ë‹¤ëŠ” ì¤‘ê°„ì— ì˜ì¡´ì„± ì£¼ì…ìê°€ ì´ ë¶€ë¶„ì„ ê°€ë¡œì±„ ë©”ì¸ ëª¨ë“ˆì´ 'ê°„ì ‘'ì ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ëŠ” ë°©ì‹ì´ë‹¤.<br>
ì´ë¥¼ í†µí•´ ë©”ì¸ ëª¨ë“ˆ(ìƒìœ„ ëª¨ë“ˆ)ì€ í•˜ìœ„ ëª¨ë“ˆì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ë–¨ì–´ì§€ê²Œ ëœë‹¤. ì´ë¥¼ 'ë””ì»¤í”Œë§'ì´ë¼ í•œë‹¤.

### ì˜ì¡´ì„± ì£¼ì…ì˜ ì¥ì 
ëª¨ë“ˆë“¤ì„ ì‰½ê²Œ êµì²´í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ê°€ ë˜ì–´ í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰½ê³  ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ê¸°ë„ ìˆ˜ì›”í•œë‹¤.<br>
ë˜í•œ, êµ¬í˜„í•  ë•Œ ì¶”ìƒí™” ë ˆì´ì–´ë¥¼ ë„£ê³  ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ì²´ë¥¼ ë„£ì–´ì£¼ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ì˜ì¡´ì„± ë°©í–¥ì´ ì¼ê´€ë˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‰½ê²Œ ì¶”ë¡ í•  ìˆ˜ ìˆìœ¼ë©°, ëª¨ë“ˆ ê°„ì˜ ê´€ê³„ë“¤ì´ ì¡°ê¸ˆ ë” ëª…í™•í•´ì§„ë‹¤.

### ì˜ì¡´ì„± ì£¼ì…ì˜ ë‹¨ì 
ëª¨ë“ˆë“¤ì´ ë”ìš± ë” ë¶„ë¦¬ë˜ë¯€ë¡œ í´ë˜ìŠ¤ ìˆ˜ê°€ ëŠ˜ì–´ë‚˜ ë³µì¡ì„±ì´ ì¦ê°€ë  ìˆ˜ ìˆìœ¼ë©°, ëŸ°íƒ€ì„ íŒ¨ë„ì¹˜ê°€ ìƒê¸°ê¸°ë„ í•œë‹¤.

### ì˜ì¡´ì„± ì£¼ì… ì›ì¹™
ì˜ì¡´ì„± ì£¼ì…ì€ 'ìƒìœ„ ëª¨ë“ˆì€ í•˜ìœ„ ëª¨ë“ˆì—ì„œ ì–´ë– í•œ ê²ƒë„ ê°€ì ¸ì˜¤ì§€ ì•Šì•„ì•¼ í•œë‹¤. ë˜í•œ, ë‘˜ ë‹¤ ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ í•˜ë©°, ì´ë•Œ ì¶”ìƒí™”ëŠ” ì„¸ë¶€ ì‚¬í•­ì— ì˜ì¡´í•˜ì§€ ë§ì•„ì•¼ í•œë‹¤.'ë¼ëŠ” ì˜ì¡´ì„± ì£¼ì… ì›ì¹™ì„ ì§€ì¼œì£¼ë©° ë§Œë“¤ì–´ì•¼ í•œë‹¤.

### ì‹±ê¸€í†¤ê³¼ ì˜ì¡´ì„± ì£¼ì…ì˜ ê´€ê³„
Springê³¼ ê°™ì€ ì˜ì¡´ì„± ì£¼ì… í”„ë ˆì„ì›Œí¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¹ˆì„ ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ë¡œ ê´€ë¦¬í•˜ì—¬, ì˜ì¡´í•˜ëŠ” í´ë˜ìŠ¤ì— ìë™ìœ¼ë¡œ ì£¼ì…í•´ì¤ë‹ˆë‹¤

## íŒ©í† ë¦¬íŒ¨í„´
<img src="images/factory.png" alt="Singleton Pattern" width="300"/><br>
ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œì—ì„œ ê°ì²´ ìƒì„± ë¶€ë¶„ì„ ë–¼ì–´ë‚¸ ì¶”ìƒí™”í•œ íŒ¨í„´ì´ë‹¤.<br> 
ìƒì† ê´€ê³„ì—ì„œ **ìƒìœ„ í´ë˜ìŠ¤ëŠ” ê°ì²´ ìƒì„±ì˜ ë¼ˆëŒ€**ë§Œ ì •ì˜í•˜ê³ , í•˜ìœ„ í´ë˜ìŠ¤ê°€ ìƒì„± ë¡œì§ì„ êµ¬í˜„í•œë‹¤.<br>
ìƒìœ„ í´ë˜ìŠ¤ì™€ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ë¶„ë¦¬ë˜ê¸° ë•Œë¬¸ì— **ëŠìŠ¨í•œ ê²°í•©**ì„ ê°€ì§„ë‹¤.<br> 
ê°ì²´ ìƒì„± ë°©ì‹ì´ ë°”ë€Œì–´ë„ ì‚¬ìš©í•˜ëŠ” ì½”ë“œëŠ” ë³€ê²½í•  í•„ìš”ê°€ ì—†ì–´ **ë” ë§ì€ ìœ ì—°ì„±**ì„ ê°€ì§„ë‹¤.<br>
ê°ì²´ ìƒì„± ë¡œì§ì´ ë”°ë¡œ ë–¼ì–´ì ¸ ìˆê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§í•˜ë”ë¼ë„ í•œ ê³³ë§Œ ê³ ì¹  ìˆ˜ ìˆê²Œ ë˜ë‹ˆ **ìœ ì§€ ë³´ìˆ˜ì„±**ì´ ì¦ê°€ëœë‹¤.

### ìë°”ì˜ íŒ©í† ë¦¬ íŒ¨í„´
```java
// --- Product (ì œí’ˆ) ---
// ëª¨ë“  ì»¤í”¼ì˜ ê³µí†µ ì¸í„°í˜ì´ìŠ¤(ë˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤)
abstract class Coffee {
    public abstract int getPrice();

    @Override
    public String toString() {
        return "Hi! This " + this.getClass().getSimpleName() + " is " + this.getPrice() + " won.";
    }
}

// Latte í´ë˜ìŠ¤
class Latte extends Coffee {
    private int price;

    public Latte(int price) {
        this.price = price;
    }

    @Override
    public int getPrice() {
        return this.price;
    }
}

// Americano í´ë˜ìŠ¤
class Americano extends Coffee {
    private int price;

    public Americano(int price) {
        this.price = price;
    }

    @Override
    public int getPrice() {
        return this.price;
    }
}

// --- Creator (ìƒì„±ì) ---
// ì»¤í”¼ë¥¼ ìƒì„±í•˜ëŠ” 'íŒ©í† ë¦¬'ì˜ ì¶”ìƒ í´ë˜ìŠ¤
// ì–´ë–¤ ì»¤í”¼ë¥¼ ë§Œë“¤ì§€ëŠ” í•˜ìœ„ í´ë˜ìŠ¤ê°€ ê²°ì •.
abstract class CoffeeFactory {
    
    // ì´ ë©”ì„œë“œê°€ ë°”ë¡œ 'íŒ©í† ë¦¬ ë©”ì„œë“œ'
    // í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ì´ ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì—¬ êµ¬ì²´ì ì¸ ì»¤í”¼ ê°ì²´ë¥¼ ìƒì„±.
    public abstract Coffee createCoffee();

    // íŒ©í† ë¦¬ì˜ ê³µí†µ ë¡œì§
    public Coffee orderCoffee() {
        // ì»¤í”¼ ìƒì„±ì€ í•˜ìœ„ í´ë˜ìŠ¤ì— ìœ„ì„
        Coffee coffee = createCoffee();
        // ìƒì„±ëœ ì»¤í”¼ì— ëŒ€í•œ ê³µí†µì ì¸ í›„ì²˜ë¦¬ ë¡œì§ì„ ì—¬ê¸°ì— ì¶”ê°€.
        System.out.println(coffee.getClass().getSimpleName() + " has been ordered.");
        return coffee;
    }
}

// Latteë¥¼ ìƒì„±í•˜ëŠ” êµ¬ì²´ì ì¸ íŒ©í† ë¦¬
class LatteFactory extends CoffeeFactory {
    private int price;

    public LatteFactory(int price) {
        this.price = price;
    }

    @Override
    public Coffee createCoffee() {
        // Latte ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜.
        return new Latte(this.price);
    }
}

// Americanoë¥¼ ìƒì„±í•˜ëŠ” êµ¬ì²´ì ì¸ íŒ©í† ë¦¬
class AmericanoFactory extends CoffeeFactory {
    private int price;

    public AmericanoFactory(int price) {
        this.price = price;
    }

    @Override
    public Coffee createCoffee() {
        // Americano ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜.
        return new Americano(this.price);
    }
}


// --- Client (í´ë¼ì´ì–¸íŠ¸) ---
// ë©”ì¸ í´ë˜ìŠ¤ì—ì„œ íŒ©í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ë¥¼ ìƒì„±.
public class Barista {
    public static void main(String[] args) {
        System.out.println("--- Welcome to the Factory Method Cafe ---");

        // 1. ë¼ë–¼ë¥¼ ì£¼ë¬¸í•˜ê¸° ìœ„í•´ 'ë¼ë–¼ íŒ©í† ë¦¬'ë¥¼ ì‚¬ìš©.
        CoffeeFactory latteFactory = new LatteFactory(4500);
        Coffee latte = latteFactory.orderCoffee();
        System.out.println("Received: " + latte);

        System.out.println("--------------------");

        // 2. ì•„ë©”ë¦¬ì¹´ë…¸ë¥¼ ì£¼ë¬¸í•˜ê¸° ìœ„í•´ 'ì•„ë©”ë¦¬ì¹´ë…¸ íŒ©í† ë¦¬'ë¥¼ ì‚¬ìš©.
        CoffeeFactory americanoFactory = new AmericanoFactory(3000);
        Coffee americano = americanoFactory.orderCoffee();
        System.out.println("Received: " + americano);
    }
}
```

## ì „ëµíŒ¨í„´
<img src="images/strategy.png" alt="Singleton Pattern" width="300"/><br>
ê°ì²´ê°€ íŠ¹ì • í–‰ìœ„ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì—¬ëŸ¬ ë°©ë²•(ì „ëµ)ë“¤ì„ ê°ê°ì˜ í´ë˜ìŠ¤ë¡œ ìº¡ìŠí™”í•˜ê³ , ì´ë“¤ì„ ë™ì ìœ¼ë¡œ êµì²´í•  ìˆ˜ ìˆë„ë¡ ë§Œë“œëŠ” íŒ¨í„´ì´ë‹¤. ì´ë¥¼ í†µí•´ **í–‰ìœ„ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œ(ì»¨í…ìŠ¤íŠ¸)**ì™€ **ì‹¤ì œ í–‰ìœ„ì˜ êµ¬í˜„(ì „ëµ)**ì„ ë¶„ë¦¬í•˜ì—¬, ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì • ì—†ì´ë„ ìƒˆë¡œìš´ ì „ëµì„ ììœ ë¡­ê²Œ ì¶”ê°€í•˜ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

### Javaë¡œ êµ¬í˜„í•œ ì „ëµíŒ¨í„´ ì˜ˆì‹œ (í• ì¸ ì •ì±… íŒ¨í„´)
```java
import java.text.NumberFormat;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

/**
 * ì „ëµ ì¸í„°í˜ì´ìŠ¤ (Strategy)
 * - ëª¨ë“  í• ì¸ ì „ëµì€ ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
 * - ì›ë³¸ ê°€ê²©ì„ ë°›ì•„ í• ì¸ëœ ê°€ê²©ì„ ë°˜í™˜í•˜ëŠ” ë‹¨ì¼ ë©”ì„œë“œë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
 */
interface DiscountStrategy {
    long applyDiscount(long originalPrice);
}

/**
 * êµ¬ì²´ì ì¸ ì „ëµ 1: ì •ì•¡ í• ì¸ (Concrete Strategy)
 */
class FixedAmountDiscountStrategy implements DiscountStrategy {
    private final long discountAmount;

    public FixedAmountDiscountStrategy(long discountAmount) {
        this.discountAmount = discountAmount;
    }

    @Override
    public long applyDiscount(long originalPrice) {
        // í• ì¸ ê¸ˆì•¡ì´ ì›ë³¸ ê°€ê²©ë³´ë‹¤ í´ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ìµœì†Œ 0ì›ì„ ë³´ì¥í•©ë‹ˆë‹¤.
        return Math.max(0, originalPrice - discountAmount);
    }
}

/**
 * êµ¬ì²´ì ì¸ ì „ëµ 2: ì •ë¥  í• ì¸ (Concrete Strategy)
 */
class PercentageDiscountStrategy implements DiscountStrategy {
    private final double percentage; // 0.1ì€ 10%, 0.15ëŠ” 15%

    public PercentageDiscountStrategy(double percentage) {
        this.percentage = percentage;
    }

    @Override
    public long applyDiscount(long originalPrice) {
        return originalPrice - (long)(originalPrice * percentage);
    }
}

/**
 * êµ¬ì²´ì ì¸ ì „ëµ 3: í• ì¸ì´ ì—†ëŠ” ê²½ìš° (Null Object Pattern)
 * - í• ì¸ì´ ì—†ëŠ” ê²½ìš°ë¥¼ ìœ„í•œ ì „ëµ ê°ì²´ì…ë‹ˆë‹¤.
 * - ì´ë ‡ê²Œ í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì—ì„œ null ì²´í¬ë¥¼ í•  í•„ìš”ê°€ ì—†ì–´ì§‘ë‹ˆë‹¤.
 */
class NoDiscountStrategy implements DiscountStrategy {
    @Override
    public long applyDiscount(long originalPrice) {
        // ì•„ë¬´ í• ì¸ë„ ì ìš©í•˜ì§€ ì•Šê³  ì›ë³¸ ê°€ê²©ì„ ê·¸ëŒ€ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
        return originalPrice;
    }
}

/**
 * ìƒí’ˆ í´ë˜ìŠ¤
 */
class Item {
    private final String name;
    private final long price; // intë³´ë‹¤ í° ê¸ˆì•¡ì„ ë‹¤ë£¨ê¸° ìœ„í•´ long ì‚¬ìš©

    public Item(String name, long price) {
        this.name = name;
        this.price = price;
    }

    public String getName() {
        return name;
    }

    public long getPrice() {
        return price;
    }
}

/**
 * ì»¨í…ìŠ¤íŠ¸ í´ë˜ìŠ¤ (Context)
 * - í• ì¸ ì „ëµì„ ì‚¬ìš©í•˜ëŠ” ì£¼ì²´ì…ë‹ˆë‹¤.
 */
class Order {
    private final List<Item> items = new ArrayList<>();
    // OrderëŠ” êµ¬ì²´ì ì¸ í• ì¸ ë°©ì‹ì„ ëª¨ë¥´ê³ , ì˜¤ì§ DiscountStrategy ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•©ë‹ˆë‹¤.
    private DiscountStrategy discountStrategy;

    public Order() {
        // ê¸°ë³¸ì ìœ¼ë¡œëŠ” í• ì¸ì´ ì—†ëŠ” ì „ëµì„ ê°€ì§‘ë‹ˆë‹¤.
        this.discountStrategy = new NoDiscountStrategy();
    }
    
    public void addItem(Item item) {
        this.items.add(item);
    }
    
    // ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ í• ì¸ ì „ëµì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    public void setDiscountStrategy(DiscountStrategy discountStrategy) {
        this.discountStrategy = discountStrategy;
    }

    public long getTotalPrice() {
        long originalPrice = items.stream().mapToLong(Item::getPrice).sum();
        // ì‹¤ì œ ê³„ì‚°ì€ ìœ„ì„ë°›ì€ ì „ëµ ê°ì²´ê°€ ìˆ˜í–‰í•©ë‹ˆë‹¤.
        return discountStrategy.applyDiscount(originalPrice);
    }
}


/**
 * ë©”ì¸ ì‹¤í–‰ í´ë˜ìŠ¤
 */
public class OnlineStore {
    public static void main(String[] args) {
        // ìƒí’ˆ ì¤€ë¹„
        Item laptop = new Item("LG ê·¸ë¨ ë…¸íŠ¸ë¶", 1_800_000L);
        Item mouse = new Item("ë¡œì§€í… ë¬´ì„  ë§ˆìš°ìŠ¤", 70_000L);

        // ì£¼ë¬¸ ìƒì„± ë° ìƒí’ˆ ì¶”ê°€
        Order order = new Order();
        order.addItem(laptop);
        order.addItem(mouse);
        
        // ì›í™”(KRW) í˜•ì‹ìœ¼ë¡œ ë³´ê¸° ì¢‹ê²Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ í¬ë§¤í„°
        NumberFormat krwFormat = NumberFormat.getCurrencyInstance(Locale.KOREA);

        long originalPrice = 1_870_000L;
        System.out.println("ì£¼ë¬¸ ì›ê°€: " + krwFormat.format(originalPrice));
        System.out.println("----------------------------------------");

        // ì‹œë‚˜ë¦¬ì˜¤ 1: ì‹ ê·œ ê°€ì…ì 10% í• ì¸ ì´ë²¤íŠ¸ ì ìš©
        order.setDiscountStrategy(new PercentageDiscountStrategy(0.1));
        System.out.println("ì ìš©ëœ í• ì¸: ì‹ ê·œ ê°€ì…ì 10% í• ì¸");
        System.out.println("ìµœì¢… ê²°ì œ ê¸ˆì•¡: " + krwFormat.format(order.getTotalPrice()));
        System.out.println();
        
        // ì‹œë‚˜ë¦¬ì˜¤ 2: ì—¬ë¦„ë§ì´ 50,000ì› í• ì¸ ì¿ í° ì ìš©
        order.setDiscountStrategy(new FixedAmountDiscountStrategy(50_000L));
        System.out.println("ì ìš©ëœ í• ì¸: ì—¬ë¦„ë§ì´ 50,000ì› í• ì¸");
        System.out.println("ìµœì¢… ê²°ì œ ê¸ˆì•¡: " + krwFormat.format(order.getTotalPrice()));
        System.out.println();

        // ì‹œë‚˜ë¦¬ì˜¤ 3: ì•„ë¬´ í• ì¸ë„ ì ìš©í•˜ì§€ ì•ŠìŒ
        order.setDiscountStrategy(new NoDiscountStrategy());
        System.out.println("ì ìš©ëœ í• ì¸: ì—†ìŒ");
        System.out.println("ìµœì¢… ê²°ì œ ê¸ˆì•¡: " + krwFormat.format(order.getTotalPrice()));
    }
}
```

### Passportì˜ ì „ëµ íŒ¨í„´

PassportëŠ” Node.jsìš© ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, **ì „ëµ íŒ¨í„´**ì„ í™œìš©í•´ ë‹¤ì–‘í•œ ì¸ì¦ ë°©ì‹ì„ ëŸ°íƒ€ì„ì— êµì²´í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì–´ ìˆë‹¤.

- **Strategy ì¸í„°í˜ì´ìŠ¤**: Passportê°€ ì •ì˜í•œ `Strategy` ê¸°ë°˜ í´ë˜ìŠ¤  
- **LocalStrategy**: ì„œë¹„ìŠ¤ ë‚´ì— ê°€ì…ëœ ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ë¡œ ì¸ì¦  
- **OAuthStrategy**: í˜ì´ìŠ¤ë¶, ë„¤ì´ë²„, êµ¬ê¸€ ë“± ì™¸ë¶€ OAuth ì œê³µìë¥¼ í†µí•œ ì¸ì¦  
- (í•„ìš”ì‹œ) **ì»¤ìŠ¤í…€ Strategy**: ê°œë°œìê°€ ì§ì ‘ êµ¬í˜„í•´ ì¶”ê°€ ê°€ëŠ¥

ì´ì²˜ëŸ¼ PassportëŠ” ê° ì¸ì¦ ì•Œê³ ë¦¬ì¦˜ì„ `Strategy` í´ë˜ìŠ¤ë¡œ ìº¡ìŠí™”í•˜ì—¬, ì»¨í…ìŠ¤íŠ¸ì¸ Express ì•± ì½”ë“œ(`app.use(passport.authenticate('local'))` ë“±)ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ ìƒˆë¡œìš´ ì¸ì¦ ë°©ì‹ì„ ì‰½ê²Œ ì¶”ê°€Â·êµì²´í•  ìˆ˜ ìˆë‹¤.

```javascript
// 1) passport ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°
const passport = require('passport');
// 2) local ì „ëµ ë¶ˆëŸ¬ì˜¤ê¸°
const LocalStrategy = require('passport-local').Strategy;

// 3) LocalStrategy ë“±ë¡
passport.use(new LocalStrategy(
  // (ì˜µì…˜) í•„ë“œëª…ì´ ê¸°ë³¸ê°’(username, password)ê³¼ ë‹¤ë¥´ë‹¤ë©´ ì´ë ‡ê²Œ ì§€ì •
  // { usernameField: 'email', passwordField: 'passwd' },
  function(username, password, done) {
    // ì˜ˆ: Mongoose ëª¨ë¸ì—ì„œ ì‚¬ìš©ì ì¡°íšŒ
    User.findOne({ username: username }, function(err, user) {
      if (err) { 
        return done(err); 
      }
      if (!user) {
        // ì‚¬ìš©ì ë¯¸ë°œê²¬
        return done(null, false, { message: 'Incorrect username.' });
      }
      if (!user.validPassword(password)) {
        // ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜
        return done(null, false, { message: 'Incorrect password.' });
      }
      // ì¸ì¦ ì„±ê³µ
      return done(null, user);
    });
  }
));
```